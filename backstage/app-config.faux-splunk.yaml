# Backstage app-config.yaml additions for Faux Splunk Cloud integration
#
# Add this configuration to your Backstage app-config.yaml to enable
# the Faux Splunk Cloud integration.

# Proxy configuration for Faux Splunk Cloud API
proxy:
  endpoints:
    '/faux-splunk-cloud':
      target: ${FSC_API_URL:-http://localhost:8800}
      changeOrigin: true
      headers:
        Authorization: Bearer ${FSC_API_TOKEN}

# Catalog locations for Faux Splunk Cloud
catalog:
  locations:
    # Faux Splunk Cloud component
    - type: url
      target: https://github.com/daijoubussy/faux-splunk-cloud/blob/main/catalog-info.yaml
      rules:
        - allow: [Component, API, Resource]

    # Scaffolder template for creating instances
    - type: url
      target: https://github.com/daijoubussy/faux-splunk-cloud/blob/main/backstage/template.yaml
      rules:
        - allow: [Template]

# TechDocs configuration (optional)
techdocs:
  builder: 'local'
  generator:
    runIn: 'local'
  publisher:
    type: 'local'

# Integration settings
integrations:
  github:
    - host: github.com
      # Token should have repo access for fetching catalog-info.yaml
      token: ${GITHUB_TOKEN}
